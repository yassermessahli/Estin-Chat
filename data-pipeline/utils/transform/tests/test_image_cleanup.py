import os
import sys
import base64

sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from image_cleanup import ImageCleanup
from model import Model, ModelParams
from tmp import print_dashboard

# Vision model parameters
params = ModelParams(
    host="http://localhost:11434",
    model="llama3.2-vision:11b",
    think=False,
    temperature=0.5,
    num_predict=70,  # for short image description
)
model = Model(params)

# Example base64 image data (this is a small sample - replace with your actual image)
example_image_b64 = "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"

image_data = {"base64": example_image_b64, "ext": "png"}


# Context from the document
example_context = """L’intégrale de la deuxième partie égale zéro : ∫₀^T cos(2(ωt + φu)) dt = 0. C’est la valeur moyenne d’une grandeur alternative.  
Donc :  
𝑈𝑒𝑓𝑓² = 𝑈𝑀² / T ∫₀^T t² dt = 𝑈𝑀² / T [T² / 2] = 𝑈𝑀² / 2  
De cette façon on a pu démontrer l’expression de la valeur efficace :  
𝑈𝑒𝑓𝑓 = √(𝑈𝑀² / 2) = 𝑈𝑀 / √2  

N.B : la tension efficace fournie aux prises murales intérieures en Algérie est 𝑉𝑒𝑓𝑓 = 230 V à une fréquence 𝑓 = 50 Hz.  
Exemple :  
𝑢(𝑡) = 14.14 sin(378t + 0.52)  
De cette fonction on peut déduire :  
ω = 378 rad/s  
𝑓 = ω / (2π) = 60 Hz ⇒ T = 1 / f = 16.66 ms  
φu = 0.52 rad ⟶ φu = 300°  
𝑈𝑀 = 14.14 ⟶ 𝑈𝑒𝑓𝑓 = 𝑈𝑀 / √2 = 10 V  
φu = ∆t · ω = 0.52 rad ⇒ ∆t = φu / ω = 0.52 / 378 = 0.0013 s  

LOIS D’OHM EN COURANT ALTERNATIF SINUSOÏDAL.  
Les lois d’Ohm s’appliquent au courant alternatif sinusoïdal. Elles s’expriment, à chaque instant, dans le cas d’éléments simples, comme suit :  

𝑢𝐴−𝑢𝐵 = R · i  
𝑢𝐴−𝑢𝐵 = L · (di/dt)  
𝑢𝐴−𝑢𝐵 = 1 / c ∫ i dt
"""

cleaner = ImageCleanup(image_data, example_context, model)
result = cleaner.process()

# for debugging
print_dashboard(result)

# Save results
results_dir = os.path.join(os.path.dirname(__file__), "outputs")
os.makedirs(results_dir, exist_ok=True)
output_file = os.path.join(results_dir, "image_description.txt")

with open(output_file, "w", encoding="utf-8") as f:
    f.write(result.message.content)

print(f"\nImage description saved to: {output_file}")
